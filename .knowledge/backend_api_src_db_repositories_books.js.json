{"is_source_file": true, "format": "JavaScript", "description": "This file implements a repository module for accessing and manipulating records in a 'Books' database table. It provides functions for listing, counting, retrieving, creating, updating, and deleting book records, utilizing the Knex query builder for database interactions.", "external_files": ["../connection"], "external_methods": ["getDb"], "published": ["listBooks", "countBooks", "getBookById", "createBook", "updateBook", "deleteBook"], "classes": [], "methods": [{"name": "listBooks({ q, author, minPrice, maxPrice, limit, offset } = {})", "description": "Fetches a list of books with optional search filters (query, author, price range) and pagination controls (limit, offset).", "scope": "", "scopeKind": ""}, {"name": "countBooks({ q, author, minPrice, maxPrice } = {})", "description": "Returns the total number of books that match the optional search filters.", "scope": "", "scopeKind": ""}, {"name": "getBookById(id)", "description": "Retrieves a single book record by its unique identifier.", "scope": "", "scopeKind": ""}, {"name": "createBook({ title, author, description, price, stock, cover_image })", "description": "Inserts a new book record into the database and returns the inserted record.", "scope": "", "scopeKind": ""}, {"name": "updateBook(id, patch)", "description": "Updates fields of a book record identified by its id and returns the updated record.", "scope": "", "scopeKind": ""}, {"name": "deleteBook(id)", "description": "Removes a book record from the database; may fail if constraints prevent deletion.", "scope": "", "scopeKind": ""}], "calls": ["getDb", "db('books')", "db('books').select('*')", "db('books').where()", "db('books').andWhere()", "db('books').count()", "db('books').where().first()", "db('books').insert()", "db('books').where().update()", "db('books').where().del()"], "search-terms": ["BooksRepository", "knex", "Books table", "listBooks", "countBooks", "getBookById", "createBook", "updateBook", "deleteBook", "database access"], "state": 2, "file_id": 22, "knowledge_revision": 70, "git_revision": "4fe6bb8257b7c9f7b8933eca56c79b9c10c70292", "revision_history": [{"48": ""}, {"70": "4fe6bb8257b7c9f7b8933eca56c79b9c10c70292"}], "ctags": [{"_type": "tag", "name": "countBooks", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^async function countBooks({ q, author, minPrice, maxPrice } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ q, author, minPrice, maxPrice } = {})"}, {"_type": "tag", "name": "createBook", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^async function createBook({ title, author, description, price, stock, cover_image }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, author, description, price, stock, cover_image })"}, {"_type": "tag", "name": "deleteBook", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^async function deleteBook(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getBookById", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^async function getBookById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "listBooks", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^  listBooks,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listBooks", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^async function listBooks({ q, author, minPrice, maxPrice, limit, offset } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ q, author, minPrice, maxPrice, limit, offset } = {})"}, {"_type": "tag", "name": "updateBook", "path": "/home/kavia/workspace/code-generation/bookstore-browse-and-purchase-27252-27277/backend_api/src/db/repositories/books.js", "pattern": "/^async function updateBook(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}], "hash": "32c5d25c619e5554eb97a648b000f827", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/db/repositories/books.js", "fields": [{"name": "listBooks,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}